# Модели бизнес-процессов для системы документооборота IMIXS

## Особенности моделирования

Для предоставления доступа **всем** пользователям той или иной привилегии ACL - применяется группа `Пользователи`. JWT токен аутентификации любого пользователя обязан содержать эту группу.

Токен аутентификации обязан содержать пользователя обязан содержать группу - название отдела, в который входит пользователь. При создании объекта модели следует передавать название отдела в поле namDepartment. Это поле можно использовать в ACL.

## Модель документа с версионированием docver-ru-1

### Поля

* `fileVersion`- добавление новой версии файла, см. FileVersionPlugin
* `txtName` - название документа (полное)
* `txtDecNum` - децимальный номер (полный)
* `txtComment` - новый комментарий к документу

## Тестирование моделей

`bash test.sh`

Использование: `./test.sh [параметры]`

Параметры:

* `-I, --image-run` - запустить тестовый сервис Imixs
* `-R, --image-remove` - после завершения тестирования удалить тестовый сервис Imixs
* `-p, --podman` - использовать контейнеры Podman вместо Docker
* `-h` - показать помощь по использованию и выйти
* `--help` - показать эту подсказку и выйти

## Загрузка моделей в сервис

```bash
    curl --silent --location --request POST "$apiUrl/model/bpmn" \
    --header 'Accept: application/xml' \
    --header "Authorization: Bearer $tokenJwt" \
    --header 'Content-Type: application/octet-stream' \
    --data-binary "@$(pwd)/$bpmn"
```

## Порядок создания диаграммы в редакторе Imixs
### Обобщения и дополнения к [документации](https://www.imixs.org/doc/modelling/index.html). Следует обратить внимание на вложенные пункты!

### Список перевода

* workitem - объект
* task - задача, прямоугольник на bpmn диаграмме

### ACL - список управления доступом

ACL опирается на информацию, записанную в полях объектов. Например, в объекте по-умолчанию присутствуют поля namCreator и namCurrentEditor. В то же время, поле, например, departmentMembers управляется либо в ручную, либо при помощи специального плагина, любым доступным образом. Это позволяет обеспечить гибкость при обработке, объект представляет собой запись в документальной БД

### Управление полями объекта

Объект - есть запись в документо-ориентированной БД. Можно управлять содержимым объекта плагинами или извне, процесс прохождения графа состояний конечного автомата не изменится.